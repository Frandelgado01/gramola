<div class="card card--padded auth-card">
  <h2 class="page-title">Cambiar contraseña</h2>
  <p class="page-subtitle">Elige una contraseña nueva para tu cuenta.</p>

  <div *ngIf="!token" class="alert alert--danger">
    No se encontró token en el enlace.
    <div class="link-row">
      <a routerLink="/recuperar-clave">Volver a recuperar contraseña</a>
    </div>
  </div>

  <div *ngIf="token">
    <div *ngIf="errorMsg" class="alert alert--danger">{{ errorMsg }}</div>

    <form class="stack" (ngSubmit)="cambiar()">
      <div class="field">
        <label for="newPwd">Nueva contraseña</label>
        <input
          id="newPwd"
          name="newPwd"
          type="password"
          [(ngModel)]="newPwd"
          placeholder="Nueva contraseña"
          autocomplete="new-password"
          required
        />
      </div>

      <div class="field">
        <label for="confirmPwd">Repite la contraseña</label>
        <input
          id="confirmPwd"
          name="confirmPwd"
          type="password"
          [(ngModel)]="confirmPwd"
          placeholder="Repite la contraseña"
          autocomplete="new-password"
          required
        />
      </div>

      <button type="submit" [disabled]="loading || !newPwd || !confirmPwd">
        {{ loading ? 'Guardando...' : 'Guardar contraseña' }}
      </button>
    </form>

    <div class="link-row">
      <a routerLink="/login">Volver a iniciar sesión</a>
    </div>
  </div>
</div>
